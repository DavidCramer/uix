var uix_edit_state=false;(function($){$(document).on("uix.init",init_uix_ajax);function init_uix_ajax(){var spinner;$(".uix-ajax").baldrick({request:window.location.href,before:function(el,ev){if(spinner){spinner.remove()}spinner=$('<span class="uix-ajax spinner"></span>');if(ev.originalEvent&&ev.originalEvent.explicitOriginalTarget){spinner.addClass("inline")}$(el).find(".uix-title").append(spinner)},callback:function(obj,ev){if(ev&&ev.originalEvent&&ev.originalEvent.explicitOriginalTarget){spinner.removeClass("spinner").addClass("dashicons dashicons-yes");setTimeout(function(){spinner.fadeOut(1e3,function(){spinner.remove()})},1e3);$(ev.originalEvent.explicitOriginalTarget).prop("disabled",false).removeClass("disabled")}else{spinner.remove();obj.params.trigger.find(".ajax-triggered").removeClass("ajax-triggered")}uix_edit_state=false}})}jQuery(document).ready(function(){$("form.uix-ajax").each(function(){var form=$(this);if(form.data("autosave")){$(document).on("uix.save",function(){form.trigger("submit")});form.on("change","[name]",function(e){$(this).addClass("ajax-triggered");$(document).trigger("uix.save")})}else{form.on("change","[name]",function(){uix_edit_state=true})}})});window.onbeforeunload=function(e){if(false===uix_edit_state){return}var dialogText="confirm";e.returnValue=dialogText;return dialogText}})(jQuery);